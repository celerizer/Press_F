#ifndef PRESS_F_FONT_C
#define PRESS_F_FONT_C

#include <string.h>

#include "font.h"

typedef u8 char_t[5];

typedef struct font_t
{
   char_t zero, one, two, three, four, five, six, seven, eight, nine;
   /* char_t g, question_mark, t, space, m, x, block, colon, hyphen; */
   /* char_t goalie_a, goalie_b, apostrophe; */
} font_t;

static const font_t font_fairchild =
{
   {0xF8, 0x88, 0x88, 0x88, 0xF8},
   {0x20, 0x20, 0x20, 0x20, 0x20},
   {0xF8, 0x08, 0xF8, 0x80, 0xF8},
   {0xF8, 0x08, 0xF8, 0x08, 0xF8},
   {0x88, 0x88, 0xF8, 0x08, 0x08},
   {0xF8, 0x80, 0xF8, 0x08, 0xF8},
   {0xF8, 0x80, 0xF8, 0x88, 0xF8},
   {0xF8, 0x08, 0x08, 0x08, 0x08},
   {0xF8, 0x88, 0xF8, 0x88, 0xF8},
   {0xF8, 0x88, 0xF8, 0x08, 0xF8}
};

static const font_t font_cute =
{
   {0x30, 0x48, 0x88, 0x90, 0x60},
   {0x08, 0x10, 0x20, 0x40, 0x80},
   {0x60, 0x90, 0x10, 0x60, 0x98},
   {0x30, 0x08, 0xA8, 0x90, 0x60},
   {0x90, 0x90, 0x90, 0x78, 0x10},
   {0x38, 0x20, 0x90, 0x90, 0x60},
   {0x80, 0xE0, 0x90, 0x90, 0x60},
   {0xF0, 0x10, 0x20, 0x40, 0x80},
   {0x18, 0x68, 0x90, 0x90, 0x60},
   {0x60, 0x90, 0x90, 0x70, 0x10}
};

static const font_t font_skinny =
{
   {0xE0, 0xA0, 0xA0, 0xA0, 0xE0},
   {0x20, 0x20, 0x20, 0x20, 0x20},
   {0xE0, 0x20, 0xE0, 0x80, 0xE0},
   {0xE0, 0x20, 0x60, 0x20, 0xE0},
   {0xA0, 0xA0, 0xE0, 0x20, 0x20},
   {0xE0, 0x80, 0xE0, 0x20, 0xE0},
   {0xE0, 0x20, 0xE0, 0xA0, 0xE0},
   {0xE0, 0x20, 0x20, 0x20, 0x20},
   {0xE0, 0xA0, 0xE0, 0xA0, 0xE0},
   {0xE0, 0xA0, 0xE0, 0x20, 0xE0}
};

void font_load(channelf_t *system, const u8 id)
{
   if (system)
   {
      const font_t *font = &font_fairchild;

      switch (id)
      {
      case FONT_CUTE:
         font = &font_cute;
         break;
      case FONT_SKINNY:
         font = &font_skinny;
      }
      memcpy(&system->rom[0x767], font, sizeof(*font));
   }
}

void font_reset(channelf_t *system)
{
   font_load(system, 0);
}

#endif
